<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Path to Public Office: A Guide to Residency Requirements in the Philippines</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .flowchart-step {
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            min-height: 80px;
        }
        .flowchart-arrow {
            font-size: 2.5rem;
            color: #0582CA;
            margin: 0.5rem 0;
            transform: rotate(90deg);
        }
        @media (min-width: 768px) {
            .flowchart-arrow {
                transform: rotate(0deg);
                margin: 0 1rem;
            }
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0582CA;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <header class="text-center mb-12 md:mb-20">
            <h1 class="text-4xl md:text-6xl font-black text-[#006494] mb-2">The Path to Public Office</h1>
            <p class="text-xl md:text-2xl text-[#0582CA]">A Visual Guide to Residency Requirements in the Philippines</p>
        </header>

        <main class="space-y-16">

            <section id="local-government">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#006494]">The Foundation: Local Government</h2>
                    <p class="max-w-3xl mx-auto mt-2 text-lg text-gray-600">The Local Government Code (R.A. 7160) establishes a single, uniform residency rule for all local elective positions, ensuring every candidate has a foundational connection to the community they wish to serve. This standard promotes decentralization and equal opportunity.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-1 bg-white rounded-lg shadow-lg p-8 text-center flex flex-col justify-center items-center h-full border-t-8 border-[#00A6FB]">
                        <span class="text-8xl md:text-9xl font-black text-[#00A6FB]">1</span>
                        <span class="text-4xl font-bold text-[#006494]">Year</span>
                        <p class="mt-4 text-gray-600">Is the uniform residency requirement for all local elective officials, from Barangay Councilor to Provincial Governor, immediately preceding election day.</p>
                    </div>
                    <div class="md:col-span-2 bg-white rounded-lg shadow-lg p-6 border-t-8 border-[#00A6FB]">
                        <h3 class="text-xl font-bold text-center mb-4 text-[#006494]">Uniform Standard Across All Tiers</h3>
                        <p class="text-center text-gray-600 mb-4">This chart visually confirms that the one-year residency rule applies equally to every local elective post, reinforcing the principle of a consistent community link.</p>
                        <div class="chart-container">
                            <canvas id="localGovChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="legislative">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#006494]">The People's Voice: The Legislature</h2>
                    <p class="max-w-3xl mx-auto mt-2 text-lg text-gray-600">Residency requirements for Congress are tiered to reflect the specific constituency of each legislator. This calibrated system balances direct local representation with a broader national perspective.</p>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 border-t-8 border-[#FBAF00]">
                    <h3 class="text-xl font-bold text-center mb-4 text-[#006494]">A Tale of Three Mandates</h3>
                     <p class="text-center text-gray-600 mb-4">The required residency period and location differ significantly between District Representatives, Party-List Representatives, and Senators, aligning with the scope of their mandate.</p>
                    <div class="chart-container">
                        <canvas id="legislativeChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="executive">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#006494]">The Highest Office: The Executive Branch</h2>
                    <p class="max-w-3xl mx-auto mt-2 text-lg text-gray-600">Reflecting the immense responsibility of leading the nation, the Constitution imposes the most stringent residency requirement on the President and Vice-President, ensuring a deep, long-term connection to the country.</p>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-8 text-center flex flex-col justify-center items-center border-t-8 border-[#006494]">
                    <span class="text-8xl md:text-9xl font-black text-[#006494]">10</span>
                    <span class="text-4xl font-bold text-[#0582CA]">Years</span>
                    <p class="mt-4 text-gray-600 max-w-xl mx-auto">Is the required residency in the Philippines for any candidate for President or Vice-President. This decade-long rule serves as a constitutional test of unwavering allegiance and profound national familiarity.</p>
                    <button id="generateProfileBtn" class="mt-6 bg-[#00A6FB] text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-[#0582CA] transition-colors duration-300">
                        ✨ Generate Hypothetical Candidate Profile
                    </button>
                </div>
            </section>

            <section id="judiciary">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#006494]">A Different Standard: The Judiciary</h2>
                    <p class="max-w-3xl mx-auto mt-2 text-lg text-gray-600">To safeguard judicial independence, judges are not required to reside in the locality they serve. Instead, their qualification is a "professional domicile"—a mandated period of legal practice or judicial service within the Philippines.</p>
                </div>
                <div class="bg-white rounded-lg shadow-lg p-6 md:p-8 border-t-8 border-[#0582CA]">
                     <h3 class="text-xl font-bold text-center mb-4 text-[#006494]">The Ladder of Legal Experience</h3>
                     <p class="text-center text-gray-600 mb-4">The required years of legal practice increase with the seniority of the court, ensuring that judicial competence and experience align with the court's level of authority.</p>
                    <div class="chart-container">
                        <canvas id="judiciaryChart"></canvas>
                    </div>
                </div>
            </section>
            
            <section id="flowchart">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-bold text-[#006494]">The Complete Ladder of Governance</h2>
                    <p class="max-w-3xl mx-auto mt-2 text-lg text-gray-600">This flowchart illustrates the hierarchical path of elective office, from the local level to the highest national positions, summarizing the distinct residency requirement at each major step.</p>
                </div>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flowchart-step bg-[#00A6FB] text-white w-full md:w-1/4">
                        <p><strong>Local Officials</strong><br>(Barangay to Governor)<br>1 Year in LGU</p>
                    </div>
                    <div class="flowchart-arrow">➔</div>
                    <div class="flowchart-step bg-[#FBAF00] text-[#006494] w-full md:w-1/4">
                        <p><strong>Legislators</strong><br>(House & Senate)<br>1-2 Years in District/PH</p>
                    </div>
                    <div class="flowchart-arrow">➔</div>
                    <div class="flowchart-step bg-[#006494] text-white w-full md:w-1/4">
                        <p><strong>President & VP</strong><br>10 Years in the Philippines</p>
                    </div>
                </div>
            </section>

            <section id="gemini-ask">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-[#006494]">Have a Question? ✨ Ask Our AI Assistant</h2>
                    <p class="max-w-3xl mx-auto mt-2 text-lg text-gray-600">Enter a question about Philippine election law or qualifications for public office, and our AI will provide an informative answer.</p>
                </div>
                <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-6 md:p-8">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="userQuestion" class="flex-grow p-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-[#00A6FB] focus:border-transparent transition" placeholder="e.g., What is the age requirement for a senator?">
                        <button id="askButton" class="bg-[#006494] text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-[#0582CA] transition-colors duration-300">
                            Ask Question
                        </button>
                    </div>
                    <div id="geminiResponse" class="mt-6 p-6 bg-gray-50 rounded-lg min-h-[100px] text-gray-700 whitespace-pre-wrap" style="display: none;"></div>
                    <div id="geminiLoader" class="loader" style="display: none;"></div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-20 pt-8 border-t border-gray-300">
            <p class="text-gray-600">Data sourced from the 1987 Philippine Constitution, R.A. 7160, and R.A. 7941. AI features powered by Google Gemini.</p>
            <p class="text-sm text-gray-400 mt-2">This infographic provides a summary for informational purposes and does not constitute legal advice.</p>
        </footer>

    </div>

    <div id="profileModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full p-8 relative animate-fade-in-up">
            <button id="closeModalBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            <h3 class="text-2xl font-bold text-[#006494] mb-4">Hypothetical Candidate Profile</h3>
            <div id="modalLoader" class="loader"></div>
            <div id="profileContent" class="text-gray-700 space-y-4"></div>
        </div>
    </div>

    <script>
        const FONT_COLOR = '#374151';
        const GRID_COLOR = '#E5E7EB';
        const PALETTE = {
            brightBlue: '#00A6FB',
            mediumBlue: '#0582CA',
            darkBlue: '#006494',
            gold: '#FBAF00',
        };

        function wrapLabel(str, maxWidth) {
            if (str.length <= maxWidth) {
                return str;
            }
            const words = str.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            lines.push(currentLine.trim());
            return lines;
        }
        
        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            }
            return label;
        };
        
        const SHARED_CHART_OPTIONS = {
            maintainAspectRatio: false,
            responsive: true,
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    },
                    backgroundColor: '#FFFFFF',
                    titleColor: '#374151',
                    bodyColor: '#374151',
                    borderColor: '#E5E7EB',
                    borderWidth: 1,
                    padding: 10,
                    displayColors: false,
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: GRID_COLOR,
                    },
                    ticks: {
                        color: FONT_COLOR,
                        font: {
                            weight: '600'
                        }
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        color: FONT_COLOR,
                        font: {
                            weight: '600'
                        }
                    }
                }
            }
        };

        const localGovLabels = [
            'Sangguniang Barangay Member', 
            'Punong Barangay', 
            'Sangguniang Bayan/Panlungsod Member', 
            'Municipal/City Vice-Mayor', 
            'Municipal/City Mayor', 
            'Sangguniang Panlalawigan Member', 
            'Vice-Governor', 
            'Governor'
        ].map(label => wrapLabel(label, 16));

        new Chart(document.getElementById('localGovChart'), {
            type: 'bar',
            data: {
                labels: localGovLabels,
                datasets: [{
                    label: 'Residency Requirement (Years)',
                    data: [1, 1, 1, 1, 1, 1, 1, 1],
                    backgroundColor: PALETTE.brightBlue,
                    borderColor: PALETTE.mediumBlue,
                    borderWidth: 2,
                    borderRadius: 5,
                }]
            },
            options: { ...SHARED_CHART_OPTIONS, scales: { ...SHARED_CHART_OPTIONS.scales, y: { ...SHARED_CHART_OPTIONS.scales.y, max: 2, ticks: { ...SHARED_CHART_OPTIONS.scales.y.ticks, stepSize: 1 } } } }
        });

        const legislativeLabels = ['District Representative', 'Party-List Representative', 'Senator'].map(label => wrapLabel(label, 16));

        new Chart(document.getElementById('legislativeChart'), {
            type: 'bar',
            data: {
                labels: legislativeLabels,
                datasets: [{
                    label: 'Residency Requirement (Years)',
                    data: [1, 1, 2],
                    backgroundColor: [PALETTE.gold, PALETTE.gold, PALETTE.mediumBlue],
                    borderColor: [PALETTE.gold, PALETTE.gold, PALETTE.darkBlue],
                    borderWidth: 2,
                    borderRadius: 5,
                }]
            },
            options: { ...SHARED_CHART_OPTIONS, scales: { ...SHARED_CHART_OPTIONS.scales, y: { ...SHARED_CHART_OPTIONS.scales.y, max: 3, ticks: { ...SHARED_CHART_OPTIONS.scales.y.ticks, stepSize: 1 } }, x: { ...SHARED_CHART_OPTIONS.scales.x, ticks: { ...SHARED_CHART_OPTIONS.scales.x.ticks, font: { size: 14, weight: '600' } } } } }
        });

        const judiciaryLabels = [
            'First Level Court Judge', 
            'Regional Trial Court Judge', 
            'Sandiganbayan Justice', 
            ['Court of Appeals', 'Justice'], 
            'Supreme Court Justice'
        ].map(label => Array.isArray(label) ? label : wrapLabel(label, 16));

        new Chart(document.getElementById('judiciaryChart'), {
            type: 'bar',
            data: {
                labels: judiciaryLabels,
                datasets: [{
                    label: 'Required Years of Legal Practice',
                    data: [5, 10, 10, 15, 15],
                    backgroundColor: PALETTE.mediumBlue,
                    borderColor: PALETTE.darkBlue,
                    borderWidth: 2,
                    borderRadius: 5,
                }]
            },
            options: { ...SHARED_CHART_OPTIONS, scales: { ...SHARED_CHART_OPTIONS.scales, y: { ...SHARED_CHART_OPTIONS.scales.y, max: 20, ticks: { ...SHARED_CHART_OPTIONS.scales.y.ticks, stepSize: 5 } } } }
        });

        const askButton = document.getElementById('askButton');
        const userQuestion = document.getElementById('userQuestion');
        const geminiResponseEl = document.getElementById('geminiResponse');
        const geminiLoader = document.getElementById('geminiLoader');
        const generateProfileBtn = document.getElementById('generateProfileBtn');
        const profileModal = document.getElementById('profileModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const profileContent = document.getElementById('profileContent');
        const modalLoader = document.getElementById('modalLoader');

        const apiKey = ""; 

        async function callGemini(prompt) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }]
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API call failed with status: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts.length > 0) {
                    return result.candidates[0].content.parts[0].text;
                } else {
                    return "Sorry, I couldn't generate a response. The model's response was empty.";
                }
            } catch (error) {
                console.error("Error calling Gemini API:", error);
                return `An error occurred: ${error.message}. Please check the console for more details.`;
            }
        }

        askButton.addEventListener('click', async () => {
            const question = userQuestion.value.trim();
            if (!question) {
                geminiResponseEl.textContent = "Please enter a question.";
                geminiResponseEl.style.display = 'block';
                return;
            }

            geminiLoader.style.display = 'block';
            geminiResponseEl.style.display = 'none';
            askButton.disabled = true;

            const prompt = `As a legal and political science expert on the Philippines, answer the following question clearly and concisely, based on Philippine law and the Constitution. Question: "${question}"`;
            const responseText = await callGemini(prompt);
            
            geminiResponseEl.textContent = responseText;
            geminiLoader.style.display = 'none';
            geminiResponseEl.style.display = 'block';
            askButton.disabled = false;
        });

        generateProfileBtn.addEventListener('click', async () => {
            profileModal.style.display = 'flex';
            profileContent.innerHTML = '';
            modalLoader.style.display = 'block';

            const prompt = `Create a short, plausible, and hypothetical biography for a Philippine presidential candidate. The candidate must be at least 40 years old, a natural-born Filipino citizen, a registered voter, able to read and write, and must have resided in the Philippines for at least 10 years immediately preceding the election. Make the biography engaging and creative, detailing their background, career, and how they meet the 10-year residency requirement.`;
            const responseText = await callGemini(prompt);

            modalLoader.style.display = 'none';
            profileContent.innerHTML = responseText.replace(/\n/g, '<br>');
        });

        closeModalBtn.addEventListener('click', () => {
            profileModal.style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target === profileModal) {
                profileModal.style.display = 'none';
            }
        });

    </script>
</body>
</html>
